# Item Library

This page documents the functions for working with items and inventory management.

---

## Overview

The item library (`lia.item`) provides a comprehensive system for managing items, inventories, and item instances within the Lilia framework. It handles item registration, instantiation, inventory management, and provides utilities for item manipulation and persistence.

---

### lia.item.get

**Purpose**

Retrieves an item definition by its unique identifier.

**Parameters**

* `identifier` (*string*): The unique identifier of the item.

**Returns**

* `itemDefinition` (*table*): The item definition table or nil if not found.

**Realm**

Shared.

**Example Usage**

```lua
-- Get an item definition
local itemDef = lia.item.get("weapon_pistol")
if itemDef then
    print("Item name: " .. itemDef.name)
    print("Item model: " .. itemDef.model)
end

-- Check if item exists
if lia.item.get("custom_item") then
    print("Custom item is registered")
end
```

---

### lia.item.getItemByID

**Purpose**

Retrieves an item instance by its database ID.

**Parameters**

* `itemID` (*number*): The database ID of the item instance.

**Returns**

* `itemInstance` (*table*): The item instance or nil if not found.

**Realm**

Shared.

**Example Usage**

```lua
-- Get item instance by ID
local item = lia.item.getItemByID(123)
if item then
    print("Item: " .. item.name)
    print("Quantity: " .. item:getQuantity())
end
```

---

### lia.item.getInstancedItemByID

**Purpose**

Retrieves an instanced item by its database ID.

**Parameters**

* `itemID` (*number*): The database ID of the instanced item.

**Returns**

* `itemInstance` (*table*): The instanced item or nil if not found.

**Realm**

Shared.

**Example Usage**

```lua
-- Get instanced item
local item = lia.item.getInstancedItemByID(456)
if item then
    print("Instanced item found")
end
```

---

### lia.item.getItemDataByID

**Purpose**

Retrieves the data for an item by its database ID.

**Parameters**

* `itemID` (*number*): The database ID of the item.

**Returns**

* `itemData` (*table*): The item data or nil if not found.

**Realm**

Shared.

**Example Usage**

```lua
-- Get item data
local data = lia.item.getItemDataByID(789)
if data then
    print("Item data: " .. table.ToString(data))
end
```

---

### lia.item.load

**Purpose**

Loads an item definition from a file path.

**Parameters**

* `path` (*string*): The file path to load the item from.
* `baseID` (*string*, *optional*): The base item ID to inherit from.
* `isBaseItem` (*boolean*, *optional*): Whether this is a base item.

**Returns**

* `itemDefinition` (*table*): The loaded item definition.

**Realm**

Shared.

**Example Usage**

```lua
-- Load item from file
local item = lia.item.load("gamemode/items/weapons/pistol.lua")
if item then
    print("Item loaded: " .. item.name)
end
```

---

### lia.item.isItem

**Purpose**

Checks if an object is a valid item instance.

**Parameters**

* `object` (*any*): The object to check.

**Returns**

* `isItem` (*boolean*): True if the object is a valid item instance.

**Realm**

Shared.

**Example Usage**

```lua
-- Check if object is an item
local someObject = {}
if lia.item.isItem(someObject) then
    print("Object is an item")
else
    print("Object is not an item")
end
```

---

### lia.item.getInv

**Purpose**

Retrieves an inventory by its ID.

**Parameters**

* `invID` (*number*): The inventory ID.

**Returns**

* `inventory` (*table*): The inventory instance or nil if not found.

**Realm**

Shared.

**Example Usage**

```lua
-- Get inventory by ID
local inv = lia.item.getInv(1)
if inv then
    print("Inventory has " .. inv:getSize() .. " slots")
end
```

---

### lia.item.register

**Purpose**

Registers an item definition with the system.

**Parameters**

* `uniqueID` (*string*): The unique identifier for the item.
* `baseID` (*string*, *optional*): The base item ID to inherit from.
* `isBaseItem` (*boolean*, *optional*): Whether this is a base item.
* `path` (*string*, *optional*): The file path of the item definition.
* `luaGenerated` (*boolean*, *optional*): Whether the item was generated by Lua.

**Returns**

* None.

**Realm**

Shared.

**Example Usage**

```lua
-- Register a custom item
lia.item.register("custom_food", "base_food", false, "items/custom_food.lua")

-- Register base item
lia.item.register("base_weapon", nil, true)
```

---

### lia.item.loadFromDir

**Purpose**

Loads all item definitions from a directory.

**Parameters**

* `directory` (*string*): The directory path to load items from.

**Returns**

* None.

**Realm**

Shared.

**Example Usage**

```lua
-- Load items from directory
lia.item.loadFromDir("gamemode/items")

-- Load from custom directory
lia.item.loadFromDir("custom/items")
```

---

### lia.item.new

**Purpose**

Creates a new item instance.

**Parameters**

* `uniqueID` (*string*): The unique identifier of the item type.
* `id` (*number*, *optional*): The database ID for the item instance.

**Returns**

* `itemInstance` (*table*): The created item instance.

**Realm**

Shared.

**Example Usage**

```lua
-- Create new item instance
local item = lia.item.new("weapon_pistol", 123)
if item then
    print("Created item: " .. item.name)
end
```

---

### lia.item.registerInv

**Purpose**

Registers a new inventory type.

**Parameters**

* `invType` (*string*): The inventory type identifier.
* `w` (*number*): The width of the inventory.
* `h` (*number*): The height of the inventory.

**Returns**

* None.

**Realm**

Shared.

**Example Usage**

```lua
-- Register player inventory type
lia.item.registerInv("player", 10, 6)

-- Register container inventory type
lia.item.registerInv("container", 5, 4)
```

---

### lia.item.newInv

**Purpose**

Creates a new inventory instance.

**Parameters**

* `owner` (*Player|Entity*): The owner of the inventory.
* `invType` (*string*): The inventory type.
* `callback` (*function*, *optional*): Callback function when inventory is created.

**Returns**

* `promise` (*Deferred*): A promise that resolves with the inventory.

**Realm**

Shared.

**Example Usage**

```lua
-- Create player inventory
lia.item.newInv(player, "player", function(inventory)
    print("Player inventory created with ID: " .. inventory:getID())
end)

-- Create container inventory
lia.item.newInv(container, "container")
```

---

### lia.item.createInv

**Purpose**

Creates a new inventory with custom dimensions.

**Parameters**

* `w` (*number*): The width of the inventory.
* `h` (*number*): The height of the inventory.
* `id` (*number*, *optional*): The inventory ID.

**Returns**

* `inventory` (*table*): The created inventory.

**Realm**

Shared.

**Example Usage**

```lua
-- Create custom inventory
local inv = lia.item.createInv(8, 6)
print("Created inventory with " .. inv:getSize() .. " slots")
```

---

### lia.item.addWeaponOverride

**Purpose**

Adds a weapon override for automatic item generation.

**Parameters**

* `className` (*string*): The weapon class name.
* `data` (*table*): The weapon data for item generation.

**Returns**

* None.

**Realm**

Shared.

**Example Usage**

```lua
-- Add weapon override
lia.item.addWeaponOverride("weapon_custom", {
    name = "Custom Weapon",
    desc = "A custom weapon description",
    model = "models/weapons/w_custom.mdl",
    width = 2,
    height = 1
})
```

---

### lia.item.addWeaponToBlacklist

**Purpose**

Adds a weapon to the blacklist to prevent automatic item generation.

**Parameters**

* `className` (*string*): The weapon class name to blacklist.

**Returns**

* None.

**Realm**

Shared.

**Example Usage**

```lua
-- Blacklist a weapon
lia.item.addWeaponToBlacklist("weapon_fists")
lia.item.addWeaponToBlacklist("weapon_medkit")
```

---

### lia.item.generateWeapons

**Purpose**

Generates item definitions for all registered weapons.

**Parameters**

* None.

**Returns**

* None.

**Realm**

Shared.

**Example Usage**

```lua
-- Generate weapon items
lia.item.generateWeapons()
print("Weapon items generated")
```

---

### lia.item.generateAmmo

**Purpose**

Generates item definitions for all registered ammo types.

**Parameters**

* None.

**Returns**

* None.

**Realm**

Shared.

**Example Usage**

```lua
-- Generate ammo items
lia.item.generateAmmo()
print("Ammo items generated")
```

---

### lia.item.setItemDataByID (Server Only)

**Purpose**

Sets data for an item instance by its database ID.

**Parameters**

* `itemID` (*number*): The database ID of the item.
* `key` (*string*): The data key.
* `value` (*any*): The value to set.
* `receivers` (*table*, *optional*): Players to network the change to.
* `noSave` (*boolean*, *optional*): Whether to skip saving to database.
* `noCheckEntity` (*boolean*, *optional*): Whether to skip entity checks.

**Returns**

* `success` (*boolean*): True if successful, false otherwise.
* `error` (*string*): Error message if unsuccessful.

**Realm**

Server.

**Example Usage**

```lua
if SERVER then
    -- Set item data
    local success, error = lia.item.setItemDataByID(123, "customData", "value")
    if success then
        print("Item data set successfully")
    else
        print("Error: " .. error)
    end
end
```

---

### lia.item.instance (Server Only)

**Purpose**

Creates a new item instance in an inventory.

**Parameters**

* `index` (*number|string*): The inventory index or uniqueID.
* `uniqueID` (*string*): The item unique identifier.
* `itemData` (*table*, *optional*): Additional item data.
* `x` (*number*, *optional*): X position in inventory.
* `y` (*number*, *optional*): Y position in inventory.
* `callback` (*function*, *optional*): Callback when item is created.

**Returns**

* `promise` (*Deferred*): A promise that resolves with the item instance.

**Realm**

Server.

**Example Usage**

```lua
if SERVER then
    -- Create item instance
    lia.item.instance(1, "weapon_pistol", {
        ammo = 12
    }, 1, 1, function(item)
        print("Item created: " .. item.name)
    end)
end
```

---

### lia.item.deleteByID (Server Only)

**Purpose**

Deletes an item instance by its database ID.

**Parameters**

* `id` (*number*): The database ID of the item to delete.

**Returns**

* None.

**Realm**

Server.

**Example Usage**

```lua
if SERVER then
    -- Delete item by ID
    lia.item.deleteByID(123)
    print("Item deleted")
end
```

---

### lia.item.loadItemByID (Server Only)

**Purpose**

Loads an item instance from the database by ID.

**Parameters**

* `itemIndex` (*number*): The database ID of the item.

**Returns**

* `promise` (*Deferred*): A promise that resolves with the loaded item.

**Realm**

Server.

**Example Usage**

```lua
if SERVER then
    -- Load item by ID
    lia.item.loadItemByID(456):next(function(item)
        if item then
            print("Item loaded: " .. item.name)
        end
    end)
end
```

---

### lia.item.spawn (Server Only)

**Purpose**

Spawns an item entity at a specific position.

**Parameters**

* `uniqueID` (*string*): The item unique identifier.
* `position` (*Vector*): The position to spawn the item.
* `callback` (*function*, *optional*): Callback when item is spawned.
* `angles` (*Angle*, *optional*): The angles for the spawned item.
* `data` (*table*, *optional*): Additional item data.

**Returns**

* None.

**Realm**

Server.

**Example Usage**

```lua
if SERVER then
    -- Spawn item at position
    lia.item.spawn("weapon_pistol", Vector(100, 200, 0), function(item)
        print("Item spawned: " .. item.name)
    end, Angle(0, 90, 0))
end
```

---

### lia.item.restoreInv (Server Only)

**Purpose**

Restores an inventory from the database.

**Parameters**

* `invID` (*number*): The inventory ID to restore.
* `w` (*number*): The width of the inventory.
* `h` (*number*): The height of the inventory.
* `callback` (*function*, *optional*): Callback when inventory is restored.

**Returns**

* None.

**Realm**

Server.

**Example Usage**

```lua
if SERVER then
    -- Restore inventory
    lia.item.restoreInv(1, 10, 6, function(inventory)
        print("Inventory restored with " .. #inventory.items .. " items")
    end)
end
```